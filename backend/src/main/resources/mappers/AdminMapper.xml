<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.ssafitmall.model.dao.AdminDao">
  
  <select id="selectAll" parameterType="String" resultType="User">
    SELECT *
    FROM user
    <if test="role != 'ALL'">
    WHERE user_role = #{role}
    </if>
  </select>

  <select id="selectUserById" parameterType="String" resultType="User">
    SELECT *
    FROM user
    WHERE user_id = #{userId}
  </select>

  <insert id="createUser" parameterType="User">
    INSERT INTO user (user_id, user_pwd, user_name, user_phone, user_email, user_role, user_nickname)
    VALUES (#{userId}, #{userPwd}, #{userName}, #{userPhone}, #{userEmail}, #{userRole}, #{userNickname})
  </insert>

  <update id="updateUser" parameterType="User">
    UPDATE user
    SET 
      user_pwd = #{userPwd},
      user_name = #{userName},
      user_phone = #{userPhone},
      user_email = #{userEmail},
      user_nickname = #{userNickname},
      user_role = #{userRole}
    WHERE user_id = #{userId}
  </update>

  <delete id="deleteUser" parameterType="String">
    DELETE FROM user
    WHERE user_id = #{userId}
  </delete>

  <update id="updateProductInspectionStatus" parameterType="hashmap">
    UPDATE product  SET inspection = #{status} WHERE product_code = #{productCode}
  </update>
  
<!--  상품 수정-->
  <update id="updateProduct" parameterType="Product">
    UPDATE product  SET product_name = #{productName}, product_price = #{productPrice},
    product_desc = #{productDesc},category_code = #{categoryCode},
    user_id = #{userId},is_sold = #{isSold} ,inspection = #{inspection} WHERE product_code = #{productCode}
  </update>

<!--  상품 전체 조회-->
  <select id="selectProductList" parameterType="ProductSearchCondition" resultType="Product">
    SELECT * FROM product
    <if test="inspection != 'ALL'">
      WHERE inspection = #{inspection}
    </if>
  </select>

<!--   상품 코드로 상품 조회-->
  <select id="selectProductByProductCode" parameterType="int" resultType="Product">
    SELECT * FROM product WHERE product_code = #{productCode}
  </select>
</mapper>
